{% from "_formhelpers.html" import render_default_field, render_field %} {% extends 'base.html' %} {% block admin %}class="active"{%
endblock %}

<h1>{% block title %} TimeSlot {{ slot.date.strftime("%d. %B %Y") }} {{ slot.start_time }} - {{ slot.end_time }}{% endblock %}</h1>

{% block content %}

<h2>Alle Damen des TimeSlots:</h2>
<table class="table table-striped table-hover">
  <tr>
    <th> </th>
    <th>Bezahlt</th>
    <th>Familienname</th>
    <th>Vorname</th>
    <th>Geburtstag</th>
    <th>E-Mail</th>
    <th>Mobile-Nr</th>
    <th>Adresse</th>
    <th>DateNr</th>
    <th> </th>
  </tr>
  {% for w in women %}
  <tr>
    <td>
      {% if not w.payed %}
      <button style="float:right" type="button" class="btn btn-default btn-sm" onclick="window.location.href='{{ url_for('change_participant_on_timeslot', slot_id = slot.id, participant_id = w.id, action='payed') }}">
        bezahlen
      </button>
      {% endif %}
      <button class="btn btn-default btn-sm" onclick="window.location.href='{{ url_for('edit_likes', participant_id=w.id) }}'">
        Likes
      </button>
    </td>
    <td>
      {% if w.payed %} Ja {% else %} Nein {% endif %}
    </td>
    <td>{{ w.name }}</td>
    <td>{{ w.prename }}</td>
    <td>{{ w.birthday.strftime("%d.%m.%Y") }}</td>
    <td>{{ w.email }}</td>
    <td>{{ w.mobile_nr }}</td>
    <td>{{ w.address }}</td>
    <td>{{ w.date_nr }}</td>
    <td>
      <form action={{ url_for( 'timeslot_view_ongoing', timeslot_id=slot.id) }} method="POST">
        {{ form.csrf_token }} {{ render_default_field(form.participant_id, w.id, false) }} {{ render_field(form.datenr, false) }}
        <button type="submit" class="btn btn-default">Go</button>
      </form>
    </td>
  </tr>
  <tr>
  </tr>
  {% else %}
  <tr>
    <td>Noch keine Teilnehmer!</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>

  {% endfor %}
</table>

<br>

<h2>Alle Herren des TimeSlots:</h2>
<table class="table table-striped table-hover">
  <tr>
    <th> </th>
    <th>Bezahlt</th>
    <th>Familienname</th>
    <th>Vorname</th>
    <th>Geburtstag</th>
    <th>E-Mail</th>
    <th>Mobile-Nr</th>
    <th>Adresse</th>
    <th>DateNr</th>
    <th> </th>
  </tr>
  {% for m in men %}
  <tr>
    <td>
      {% if not m.payed %}
      <button style="float:right" type="button" class="btn btn-default btn-sm" onclick="window.location.href='{{ url_for('change_participant_on_timeslot', slot_id = slot.id, participant_id = m.id, action='payed') }}'">
        bezahlen
      </button>
      {% endif %}
      <button class="btn btn-default btn-sm" onclick="window.location.href='{{ url_for('edit_likes', participant_id=m.id) }}'">
        Likes
      </button>
    </td>
    <td>
      {% if m.payed %} Ja {% else %} Nein {% endif %}
    </td>
    <td>{{ m.name }}</td>
    <td>{{ m.prename }}</td>
    <td>{{ m.birthday.strftime("%d.%m.%Y") }}</td>
    <td>{{ m.email }}</td>
    <td>{{ m.mobile_nr }}</td>
    <td>{{ m.address }}</td>
    <td>{{ m.date_nr }}</td>
    <td>
      <form action={{ url_for( 'timeslot_view_ongoing', timeslot_id=slot.id) }} method="POST">
        {{ form.csrf_token }} {{ render_default_field(form.participant_id, m.id, false) }} {{ render_field(form.datenr, false) }}
        <button type="submit" class="btn btn-default">Go</button>
      </form>
    </td>
  </tr>
  <tr>
  </tr>
  {% else %}
  <tr>
    <td>Noch keine Teilnehmer!</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  {% endfor %}
</table>

<div style="text-align:center;">
  <button type="button" class="btn btn-default btn-m" onclick="window.location.href='{{ url_for('export_slot', timeslot_id = slot.id) }}'">
    Exportieren
  </button>
</div>

{% endblock %}